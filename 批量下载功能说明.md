# BBDownG 批量下载功能说明

## 功能概述

BBDownG 现已支持批量下载功能，可以从 txt 或 ini 格式的配置文件中读取多个视频地址列表，并逐个自动完成下载。

## 主要特性

1. **多格式支持**：支持 txt 和 ini 两种配置文件格式
2. **智能解析**：自动识别和解析各种B站视频URL格式
3. **实时进度**：显示实时下载进度和当前处理的视频
4. **异常处理**：处理下载异常情况，继续处理后续视频
5. **统计报告**：提供详细的下载完成汇总报告
6. **可控制性**：支持随时停止批量下载任务

## 使用方法

### 方法一：通过主界面
1. 在主界面的"视频地址"输入框中选择配置文件（txt或ini格式）
2. 点击"下载"按钮，系统会自动检测到是配置文件并启动批量下载

### 方法二：直接使用批量下载
1. 点击主界面的"批量下载"按钮
2. 在批量下载窗口中点击"浏览"选择配置文件
3. 系统会自动解析并显示找到的视频地址
4. 点击"开始下载"开始批量下载任务

## 配置文件格式

### TXT 格式 (example_urls.txt)
```
# 注释行以 # 开头
https://www.bilibili.com/video/BV1xx411c7mu
https://www.bilibili.com/video/BV1GJ411x7h7
BV1234567890
ep123456
ss12345
```

### INI 格式 (example_urls.ini)
```ini
[视频列表]
video1 = https://www.bilibili.com/video/BV1xx411c7mu
video2 = BV1GJ411x7h7

[番剧列表]
bangumi1 = ep123456
bangumi2 = ss12345
```

## 支持的URL格式

1. **完整视频链接**：`https://www.bilibili.com/video/BV1xx411c7mu`
2. **短链接**：`https://b23.tv/BV1xx411c7mu`
3. **番剧链接**：`https://www.bilibili.com/bangumi/play/ep123456`
4. **简化BV号**：`BV1xx411c7mu`
5. **番剧EP号**：`ep123456`
6. **番剧SS号**：`ss12345`

## 批量下载界面功能

### 文件选择区域
- **文件路径**：显示当前选择的配置文件路径
- **浏览按钮**：选择txt或ini格式的配置文件

### 视频地址列表
- 显示从配置文件中解析出的所有有效视频地址
- 显示找到的视频地址总数
- 自动去重处理

### 下载进度
- **进度条**：显示整体下载进度
- **进度文本**：显示当前进度（如：3/10 30%）
- **当前视频**：显示正在下载的视频地址

### 下载日志
- 实时显示下载过程中的详细信息
- 显示每个视频的下载状态（成功/失败）
- 显示最终的统计报告

### 控制按钮
- **开始下载**：开始批量下载任务
- **停止下载**：停止当前的批量下载任务
- **关闭**：关闭批量下载窗口

## 下载统计报告

批量下载完成后，系统会提供详细的统计报告：

- **总计**：处理的视频总数
- **成功**：成功下载的视频数量
- **失败**：下载失败的视频数量
- **成功率**：下载成功率百分比
- **失败列表**：列出所有下载失败的视频地址

## 注意事项

1. **文件编码**：配置文件请使用UTF-8编码保存
2. **网络环境**：确保网络连接稳定，避免下载中断
3. **存储空间**：确保有足够的磁盘空间存储下载的视频
4. **下载间隔**：系统会在每个视频下载间添加1秒延迟，避免请求过于频繁
5. **异常处理**：如果某个视频下载失败，系统会继续处理后续视频
6. **重复处理**：系统会自动去除重复的视频地址

## 错误处理

- **文件读取错误**：检查文件是否存在且格式正确
- **网络连接错误**：检查网络连接和代理设置
- **视频不存在**：某些视频可能已被删除或设为私密
- **权限问题**：某些视频可能需要登录或会员权限

## 技术特性

- **多线程处理**：使用独立线程进行下载，不阻塞界面
- **实时反馈**：通过信号机制实时更新界面状态
- **资源管理**：合理管理系统资源，避免内存泄漏
- **异常恢复**：具备良好的异常处理和恢复机制

通过这个批量下载功能，用户可以轻松管理和下载大量B站视频，大大提高下载效率。